# FreshClam Configuration - Production Optimized for Cloud Run
# Memory-efficient virus database updates

# Database directory
DatabaseDirectory /var/lib/clamav

# Update log
UpdateLogFile /var/log/clamav/freshclam.log
LogVerbose no
LogSyslog no
LogTime yes
LogFileMaxSize 5M
LogRotate yes

# PID file
PidFile /var/run/clamav/freshclam.pid

# Run as daemon
Foreground yes

# Database mirror selection
DatabaseMirror database.clamav.net

# MEMORY OPTIMIZATION SETTINGS

# Only download essential databases
# Skip optional databases to reduce memory footprint
DatabaseCustomURL http://database.clamav.net/main.cvd
DatabaseCustomURL http://database.clamav.net/daily.cvd
DatabaseCustomURL http://database.clamav.net/bytecode.cvd

# Connection settings
ConnectTimeout 60
ReceiveTimeout 120

# Retry settings (reduce network overhead)
MaxAttempts 3

# Disable automatic daemon notification (we'll restart manually)
NotifyClamd /etc/clamav/clamd.conf

# Checks for updates (only once at startup, not continuous)
Checks 1

# Compression
CompressLocalDatabase no

# User
DatabaseOwner clamav

# Test databases after download
TestDatabases yes

# Exclude specific signatures to save memory
# ExtraDatabase example.ndb
# ExcludeDatabase test

# Bytecode settings
Bytecode yes

# Logging
LogFileMaxSize 5M
